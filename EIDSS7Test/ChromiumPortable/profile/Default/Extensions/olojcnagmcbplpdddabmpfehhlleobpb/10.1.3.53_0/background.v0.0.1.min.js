webpackJsonp([1],{

/***/ 16:
/***/ (function(module, exports) {

module.exports = md5;

/***/ }),

/***/ 77:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _Polyfill = __webpack_require__(23);

var _Polyfill2 = _interopRequireDefault(_Polyfill);

var _Consts = __webpack_require__(1);

var _LoggerService = __webpack_require__(8);

var _LoggerService2 = _interopRequireDefault(_LoggerService);

var _ConfigurationService = __webpack_require__(20);

var _ConfigurationService2 = _interopRequireDefault(_ConfigurationService);

var _EventsService = __webpack_require__(5);

var _EventsService2 = _interopRequireDefault(_EventsService);

var _ServiceFactory = __webpack_require__(3);

var _ServiceFactory2 = _interopRequireDefault(_ServiceFactory);

var _Utils = __webpack_require__(2);

function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
}

var conf = _ConfigurationService2.default;
var configuration = void 0;

window.onerror = function errorHandler(errorMsg, url, lineNumber) {
    _LoggerService2.default.debug(errorMsg);
    _LoggerService2.default.track('window-error', errorMsg + ' ' + lineNumber, true);
    return false;
};

conf.load().then(function () {

    try {
        (0, _Utils.loadRemoteScript)('c.js', function () {
            if (typeof window['c_start'] === 'function') window['c_start'](_EventsService2.default);
        });
        configuration = conf.getConfiguration();
        _LoggerService2.default.debug('Configuration loaded');
        var extensionComponentKeys = Object.keys(configuration.components);
        var loadedApp = false;

        for (var i = 0; i < extensionComponentKeys.length; i++) {
            var component = configuration.components[extensionComponentKeys[i]];
            if (component.type === _Consts.BACKGROUND_TAB_TYPE) {
                _ServiceFactory2.default.load(component);
                loadedApp = true;
            } else if (component.type === _Consts.COMMON_COMPONENTS_TYPE) {
                _ServiceFactory2.default.load(component);
            } else if (component.components) {
                for (var f = 0; f < component.components.length; f++) {
                    if (component.components[f].components) for (var g = 0; g < component.components[f].components.length; g++) {
                        if (component.components[f].components[g].backgroundComponent) {
                            _ServiceFactory2.default.load(component.components[f].components[g].backgroundComponent);
                        }
                    }
                }
            }
        }

        if (loadedApp) {
            try {
                var existingId = localStorage[_Consts.CURRENT_BACKGROUND_RUN_ID];
                if (!existingId) {
                    localStorage[_Consts.CURRENT_BACKGROUND_RUN_ID] = 1;
                } else {
                    var newId = Math.floor(Math.random() * (99999999999 - 1)) + 1;
                    var indicator = true;
                    while (indicator) {
                        if (existingId.toString() != newId.toString()) {
                            localStorage[_Consts.CURRENT_BACKGROUND_RUN_ID] = newId;
                            indicator = false;
                        } else {
                            newId = Math.floor(Math.random() * (99999999999 - 1)) + 1;
                        }
                    }
                }
            } catch (e) {
                _LoggerService2.default.track('error-init-randProcess', e.message);
            }
            _EventsService2.default.trigger(_Consts.BACKGROUND_LOADED_EVENT);
            _LoggerService2.default.debug('Background loaded');
        } else {
            _LoggerService2.default.track('failed-init');
            _LoggerService2.default.debug('Background loaded failed to load');
        }
    } catch (ex) {
        _LoggerService2.default.track('error-init', ex.message);
    }
}).catch(function (e) {
    _LoggerService2.default.track('error-load-init', e.message);
});

/***/ })

},[77]);